import fs from 'fs-extra';

const UNKNOWN_VERMOJI = 'â“';

let vermojis = [
  'ðŸ’¯',
  'â˜€ï¸',
  'â˜•ï¸',
  'â™¨ï¸',
  'âœˆï¸',
  'âœ¨',
  'â„ï¸',
  'â¤ï¸',
  'â˜Žï¸',
  'âš¡ï¸',
  'âš½ï¸',
  'âš¾ï¸',
  'â›„ï¸',
  'â›‘',
  'â›°',
  'â›±',
  'â›²ï¸',
  'â›³ï¸',
  'â›´',
  'â›µï¸',
  'â›·',
  'â›¸',
  'â›¹',
  'â›ºï¸',
  'â­ï¸',
  'ðŸŒ€',
  'ðŸŒ',
  'ðŸŒƒ',
  'ðŸŒ„',
  'ðŸŒ…',
  'ðŸŒ‡',
  'ðŸŒˆ',
  'ðŸŒ',
  'ðŸŒŽ',
  'ðŸŒ',
  'ðŸŒ',
  'ðŸŒ™',
  'ðŸŒœ',
  'ðŸŒ',
  'ðŸŒž',
  'ðŸŒŸ',
  'ðŸŒª',
  'ðŸŒ­',
  'ðŸŒ®',
  'ðŸŒ¯',
  'ðŸŒ±',
  'ðŸŒ²',
  'ðŸŒ³',
  'ðŸŒ´',
  'ðŸŒµ',
  'ðŸŒ¶',
  'ðŸŒ·',
  'ðŸŒ¸',
  'ðŸŒ¹',
  'ðŸŒº',
  'ðŸŒ»',
  'ðŸŒ¼',
  'ðŸ€',
  'ðŸ',
  'ðŸ…',
  'ðŸ‡',
  'ðŸˆ',
  'ðŸ‰',
  'ðŸŠ',
  'ðŸ‹',
  'ðŸŒ',
  'ðŸ',
  'ðŸŽ',
  'ðŸ',
  'ðŸ',
  'ðŸ’',
  'ðŸ“',
  'ðŸ”',
  'ðŸ•',
  'ðŸ–',
  'ðŸ—',
  'ðŸœ',
  'ðŸ',
  'ðŸž',
  'ðŸŸ',
  'ðŸ¡',
  'ðŸ£',
  'ðŸ¤',
  'ðŸ¦',
  'ðŸ§',
  'ðŸ¨',
  'ðŸ©',
  'ðŸª',
  'ðŸ«',
  'ðŸ¬',
  'ðŸ­',
  'ðŸ®',
  'ðŸ¯',
  'ðŸ°',
  'ðŸ²',
  'ðŸµ',
  'ðŸ·',
  'ðŸ¸',
  'ðŸ¹',
  'ðŸº',
  'ðŸ»',
  'ðŸ¥ƒ',
  'ðŸ¾',
  'ðŸ¿',
  'ðŸŽ€',
  'ðŸŽ',
  'ðŸŽ‚',
  'ðŸŽ†',
  'ðŸŽ‡',
  'ðŸŽˆ',
  'ðŸŽ‰',
  'ðŸŽŠ',
  'ðŸŽ–',
  'ðŸŽ™',
  'ðŸŽ ',
  'ðŸŽ¡',
  'ðŸŽ¢',
  'ðŸŽ¤',
  'ðŸŽ¨',
  'ðŸŽ©',
  'ðŸŽª',
  'ðŸŽ¬',
  'ðŸŽ­',
  'ðŸŽ¯',
  'ðŸŽ°',
  'ðŸŽ±',
  'ðŸŽ²',
  'ðŸŽ³',
  'ðŸŽ·',
  'ðŸŽ¸',
  'ðŸŽ¹',
  'ðŸŽº',
  'ðŸŽ»',
  'ðŸŽ¾',
  'ðŸŽ¿',
  'ðŸ€',
  'ðŸ',
  'ðŸ‚',
  'ðŸƒ',
  'ðŸ„',
  'ðŸ…',
  'ðŸ†',
  'ðŸ‡',
  'ðŸˆ',
  'ðŸ‰',
  'ðŸŠ',
  'ðŸ‹',
  'ðŸŒ',
  'ðŸ',
  'ðŸŽ',
  'ðŸ',
  'ðŸ',
  'ðŸ‘',
  'ðŸ’',
  'ðŸ“',
  'ðŸ”',
  'ðŸ•',
  'ðŸ–',
  'ðŸ™',
  'ðŸœ',
  'ðŸ',
  'ðŸ°',
  'ðŸµ',
  'ðŸ¸',
  'ðŸ¹',
  'ðŸ',
  'ðŸ‚',
  'ðŸ„',
  'ðŸ…',
  'ðŸ†',
  'ðŸ‡',
  'ðŸˆ',
  'ðŸ‰',
  'ðŸŠ',
  'ðŸ‹',
  'ðŸŒ',
  'ðŸ',
  'ðŸŽ',
  'ðŸ',
  'ðŸ',
  'ðŸ’',
  'ðŸ“',
  'ðŸ”',
  'ðŸ•',
  'ðŸ–',
  'ðŸ—',
  'ðŸ˜',
  'ðŸ™',
  'ðŸš',
  'ðŸ›',
  'ðŸ',
  'ðŸž',
  'ðŸŸ',
  'ðŸ ',
  'ðŸ¡',
  'ðŸ£',
  'ðŸ¤',
  'ðŸ¥',
  'ðŸ¦',
  'ðŸ§',
  'ðŸ¨',
  'ðŸ©',
  'ðŸ«',
  'ðŸ¬',
  'ðŸ­',
  'ðŸ®',
  'ðŸ¯',
  'ðŸ°',
  'ðŸ±',
  'ðŸ³',
  'ðŸ´',
  'ðŸµ',
  'ðŸ¶',
  'ðŸ·',
  'ðŸ¸',
  'ðŸ¹',
  'ðŸº',
  'ðŸ»',
  'ðŸ¼',
  'ðŸ½',
  'ðŸ¿',
  'ðŸ‘‘',
  'ðŸ‘’',
  'ðŸ‘»',
  'ðŸ‘½',
  'ðŸ‘¾',
  'ðŸ’',
  'ðŸ’™',
  'ðŸ’š',
  'ðŸ’›',
  'ðŸ’¡',
  'ðŸ’¥',
  'ðŸ’ª',
  'ðŸ’«',
  'ðŸ’¾',
  'ðŸ’¿',
  'ðŸ“Œ',
  'ðŸ“',
  'ðŸ“Ÿ',
  'ðŸ›°',
  'ðŸ“¢',
  'ðŸ“£',
  'ðŸ“¬',
  'ðŸ“·',
  'ðŸ“º',
  'ðŸ“»',
  'ðŸ”ˆ',
  'ðŸ”‹',
  'ðŸ””',
  'ðŸ”¥',
  'ðŸ”¬',
  'ðŸ”­',
  'ðŸ”®',
  'ðŸ•Š',
  'ðŸ•¹',
  'ðŸ–',
  'ðŸ—»',
  'ðŸ˜€',
  'ðŸ˜ƒ',
  'ðŸ˜„',
  'ðŸ˜ˆ',
  'ðŸ˜Š',
  'ðŸ˜‹',
  'ðŸ˜Ž',
  'ðŸ˜›',
  'ðŸ˜œ',
  'ðŸ˜¸',
  'ðŸ¤“',
  'ðŸ¤–',
  'ðŸš€',
  'ðŸš',
  'ðŸš‚',
  'ðŸšƒ',
  'ðŸš…',
  'ðŸš‹',
  'ðŸšŒ',
  'ðŸš',
  'ðŸšŽ',
  'ðŸš',
  'ðŸš‘',
  'ðŸš’',
  'ðŸš“',
  'ðŸš”',
  'ðŸš•',
  'ðŸš–',
  'ðŸš—',
  'ðŸš˜',
  'ðŸš™',
  'ðŸšš',
  'ðŸš›',
  'ðŸšœ',
  'ðŸšž',
  'ðŸšŸ',
  'ðŸš ',
  'ðŸš¡',
  'ðŸš¢',
  'ðŸš£',
  'ðŸš¤',
  'ðŸš¦',
  'ðŸš¨',
  'ðŸš©',
  'ðŸ› ',
  'ðŸ›¥',
  'ðŸ›©',
  'ðŸ›³',
  'ðŸ¤˜',
  'ðŸ¦€',
  'ðŸ¦',
  'ðŸ¦‚',
  'ðŸ¦ƒ',
  'ðŸ¦„',
  'ðŸ§€',
];

// filter out the 'unknown version vermoji'
vermojis = vermojis.filter((vermoji) => vermoji !== UNKNOWN_VERMOJI);

export function getVermoji(changelogPath: string) {
  const changelog = fs.readFileSync(changelogPath, 'utf8');

  while (true) {
    const randomIndex = Math.floor(Math.random() * vermojis.length);
    const vermoji = vermojis[randomIndex];
    if (changelog.includes(vermoji)) {
      vermojis.splice(randomIndex, 1);

      if (vermojis.length === 0) {
        console.warn(`We're out of Vermoji! Create a task to add some more!`);
        return UNKNOWN_VERMOJI;
      }
    } else {
      return vermoji;
    }
  }
}
